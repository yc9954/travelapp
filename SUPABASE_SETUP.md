# Supabase ì„¤ì • ê°€ì´ë“œ

ì´ ì•±ì€ Supabaseë¥¼ ë°±ì—”ë“œë¡œ ì‚¬ìš©í•˜ì—¬ ì¸ì¦, ë°ì´í„°ë² ì´ìŠ¤, ìŠ¤í† ë¦¬ì§€ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

## 1. Supabase í”„ë¡œì íŠ¸ ìƒì„±

1. [Supabase](https://supabase.com)ì— ê°€ì…/ë¡œê·¸ì¸
2. "New Project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì´ë¦„, ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ì„¤ì •
4. ë¦¬ì „ ì„ íƒ (Seoul ê¶Œì¥)
5. í”„ë¡œì íŠ¸ ìƒì„± ëŒ€ê¸° (ì•½ 2ë¶„)

## 2. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ìƒì„±

í”„ë¡œì íŠ¸ê°€ ìƒì„±ë˜ë©´:

### 2.1 ìŠ¤í‚¤ë§ˆ ìƒì„±

1. ì™¼ìª½ ë©”ë‰´ì—ì„œ **SQL Editor** í´ë¦­
2. **New Query** í´ë¦­
3. `supabase/migrations/001_initial_schema.sql` íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬
4. SQL Editorì— ë¶™ì—¬ë„£ê¸°
5. **Run** ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì‹¤í–‰

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒì„ ìƒì„±í•©ë‹ˆë‹¤:
- `profiles` í…Œì´ë¸” (ì‚¬ìš©ì í”„ë¡œí•„)
- `posts` í…Œì´ë¸” (ê²Œì‹œë¬¼)
- `likes` í…Œì´ë¸” (ì¢‹ì•„ìš”)
- `comments` í…Œì´ë¸” (ëŒ“ê¸€)
- Row Level Security ì •ì±…
- ìë™ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸ íŠ¸ë¦¬ê±°

### 2.2 ì´ˆê¸° ë°ì´í„° ì‚½ì… (Seed Data) â­ ì¤‘ìš”!

ìŠ¤í‚¤ë§ˆ ìƒì„± í›„, **ë°˜ë“œì‹œ** ê¸°ë³¸ ë”ë¯¸ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:

1. **SQL Editor**ì—ì„œ **New Query** í´ë¦­
2. `supabase/migrations/002_seed_data.sql` íŒŒì¼ì˜ ë‚´ìš©ì„ ë³µì‚¬
3. SQL Editorì— ë¶™ì—¬ë„£ê¸°
4. **Run** ë²„íŠ¼ í´ë¦­í•˜ì—¬ ì‹¤í–‰

ì´ ìŠ¤í¬ë¦½íŠ¸ëŠ” ë‹¤ìŒì„ ìƒì„±í•©ë‹ˆë‹¤:
- ğŸ§‘â€ğŸ’¼ 3ëª…ì˜ ë°ëª¨ ì‚¬ìš©ì (traveler123, worldexplorer, photographer)
- ğŸ“¸ 14ê°œì˜ ìƒ˜í”Œ ê²Œì‹œë¬¼ (ë„ì‹œ, ìì—°, ê±´ì¶•, ì¸í…Œë¦¬ì–´, ì˜ˆìˆ  ë“± ë‹¤ì–‘í•œ ì½˜í…ì¸ )
- â¤ï¸ ì´ˆê¸° ì¢‹ì•„ìš” ë° ğŸ’¬ ëŒ“ê¸€

**ì´ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ë©´ ì•±ì„ ì‹¤í–‰í•  ë•Œ í”¼ë“œê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤!**

## 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • â­ í•„ìˆ˜!

ì´ ë‹¨ê³„ë¥¼ ê±´ë„ˆë›°ë©´ "Invalid API key" ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤!

### 3.1 Supabase API í‚¤ ë³µì‚¬

1. Supabase í”„ë¡œì íŠ¸ ëŒ€ì‹œë³´ë“œì—ì„œ **Settings** > **API** ì´ë™
2. ë‹¤ìŒ ë‘ ê°’ì„ ë³µì‚¬:
   - **Project URL** (ì˜ˆ: `https://abcdefghijklmnop.supabase.co`)
   - **Project API keys** â†’ **anon public** key (ê¸´ ë¬¸ìì—´)

### 3.2 .env íŒŒì¼ ìƒì„±

1. í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— `.env` íŒŒì¼ ìƒì„±
2. ë‹¤ìŒ ë‚´ìš©ì„ ë¶™ì—¬ë„£ê³  **ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´**:

```env
EXPO_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
EXPO_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

âš ï¸ **ì¤‘ìš”**:
- `.env.example` íŒŒì¼ì´ ì•„ë‹Œ `.env` íŒŒì¼ì„ ìƒì„±í•˜ì„¸ìš”
- `your-project-id`ì™€ í‚¤ ê°’ì„ **ë°˜ë“œì‹œ** ì‹¤ì œ ê°’ìœ¼ë¡œ êµì²´í•˜ì„¸ìš”
- `.env` íŒŒì¼ì€ Gitì— ì»¤ë°‹í•˜ì§€ ë§ˆì„¸ìš” (ì´ë¯¸ .gitignoreì— í¬í•¨ë¨)

### 3.3 ì•± ì¬ì‹œì‘

í™˜ê²½ ë³€ìˆ˜ ë³€ê²½ í›„ **ë°˜ë“œì‹œ** ì•±ì„ ì¬ì‹œì‘í•˜ì„¸ìš”:

```bash
# ê°œë°œ ì„œë²„ ì¤‘ì§€ (Ctrl+C)
# ìºì‹œ í´ë¦¬ì–´ í›„ ì¬ì‹œì‘
expo start --clear
```

## 4. Google OAuth ì„¤ì • (ì„ íƒì‚¬í•­)

Google ë¡œê·¸ì¸ì„ ì‚¬ìš©í•˜ë ¤ë©´:

1. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ **Authentication** > **Providers** ì´ë™
2. **Google** ì„ íƒ
3. "Enable Google Provider" í† ê¸€ ON
4. [Google Cloud Console](https://console.cloud.google.com)ì—ì„œ:
   - OAuth í´ë¼ì´ì–¸íŠ¸ ID ìƒì„±
   - Authorized redirect URIsì— Supabase ì½œë°± URL ì¶”ê°€:
     ```
     https://[YOUR_PROJECT_ID].supabase.co/auth/v1/callback
     ```
5. Client IDì™€ Client Secretì„ Supabaseì— ì…ë ¥
6. **Save** í´ë¦­

## 5. ì´ë©”ì¼ ì¸ì¦ ì„¤ì •

ê¸°ë³¸ì ìœ¼ë¡œ SupabaseëŠ” ì´ë©”ì¼ í™•ì¸ì„ ìš”êµ¬í•©ë‹ˆë‹¤. ê°œë°œ ì¤‘ì—ëŠ” ë¹„í™œì„±í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

1. **Authentication** > **Settings** ì´ë™
2. "Enable email confirmations" í† ê¸€ OFF (ê°œë°œ ì¤‘)
3. í”„ë¡œë•ì…˜ì—ì„œëŠ” ONìœ¼ë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì„ ê¶Œì¥

## 6. Row Level Security (RLS) ì •ì±…

ìŠ¤í‚¤ë§ˆ ìƒì„± ì‹œ RLS ì •ì±…ì´ ìë™ìœ¼ë¡œ ì„¤ì •ë©ë‹ˆë‹¤:

- **Profiles**: ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆê³ , ë³¸ì¸ë§Œ ìˆ˜ì • ê°€ëŠ¥
- **Posts**: ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆê³ , ë³¸ì¸ë§Œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
- **Likes**: ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆê³ , ë³¸ì¸ë§Œ ì¶”ê°€/ì‚­ì œ ê°€ëŠ¥
- **Comments**: ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆê³ , ë³¸ì¸ë§Œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥

## 7. í…ŒìŠ¤íŠ¸

ì•±ì„ ì‹¤í–‰í•˜ê³  ë‹¤ìŒì„ í…ŒìŠ¤íŠ¸:

1. âœ… ì´ë©”ì¼ë¡œ íšŒì›ê°€ì…
2. âœ… ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸
3. âœ… Google ë¡œê·¸ì¸ (ì„¤ì •í•œ ê²½ìš°)
4. âœ… ê²Œì‹œë¬¼ ì—…ë¡œë“œ
5. âœ… ì¢‹ì•„ìš” ì¶”ê°€/ì œê±°
6. âœ… ëŒ“ê¸€ ì‘ì„±
7. âœ… í”„ë¡œí•„ ë³´ê¸°

## 8. Supabase Storage ì„¤ì • (ì´ë¯¸ì§€ ì—…ë¡œë“œ)

í–¥í›„ ì´ë¯¸ì§€ ì—…ë¡œë“œë¥¼ ìœ„í•´:

1. **Storage** ë©”ë‰´ ì´ë™
2. **New bucket** í´ë¦­
3. ë²„í‚· ì´ë¦„: `post-images`
4. Public bucket ì²´í¬
5. **Create bucket**

ì´ë¯¸ì§€ ì—…ë¡œë“œ êµ¬í˜„ì€ ì¶”í›„ `uploadImage` í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

## ë¬¸ì œ í•´ê²°

### âŒ "Invalid API key" ì˜¤ë¥˜

**ì›ì¸**: `.env` íŒŒì¼ì´ ì—†ê±°ë‚˜ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜ëª» ì„¤ì •ë¨

**í•´ê²° ë°©ë²•**:
1. í”„ë¡œì íŠ¸ ë£¨íŠ¸ì— `.env` íŒŒì¼ì´ ìˆëŠ”ì§€ í™•ì¸
2. íŒŒì¼ ë‚´ìš© í™•ì¸:
   ```bash
   cat .env
   ```
3. `EXPO_PUBLIC_SUPABASE_URL`ê³¼ `EXPO_PUBLIC_SUPABASE_ANON_KEY`ê°€ ì‹¤ì œ ê°’ìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
4. Supabase ëŒ€ì‹œë³´ë“œì—ì„œ API í‚¤ê°€ ì˜¬ë°”ë¥¸ì§€ ì¬í™•ì¸
5. ì•±ì„ **ë°˜ë“œì‹œ ì¬ì‹œì‘**:
   ```bash
   expo start --clear
   ```

### âŒ ë°ì´í„°ê°€ ë³´ì´ì§€ ì•ŠìŒ (ë¹ˆ í”¼ë“œ)

**ì›ì¸**: Seed dataë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:
- Supabase SQL Editorì—ì„œ `002_seed_data.sql` ì‹¤í–‰
- ë°ì´í„° í™•ì¸: `SELECT * FROM posts;` ì‹¤í–‰
- RLS ì •ì±…ì´ ì˜¬ë°”ë¥´ê²Œ ì„¤ì •ë˜ì—ˆëŠ”ì§€ í™•ì¸

### âŒ ì¸ì¦ ì—ëŸ¬

**í•´ê²° ë°©ë²•**:
- `.env` íŒŒì¼ì˜ í™˜ê²½ ë³€ìˆ˜ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
- Supabase ëŒ€ì‹œë³´ë“œì—ì„œ ì´ë©”ì¼ í™•ì¸ ì„¤ì • í™•ì¸ (ê°œë°œ ì¤‘ì—ëŠ” OFF)
- ì•±ì„ ì¬ì‹œì‘: `expo start --clear`

### âŒ ê¶Œí•œ ì—ëŸ¬

**í•´ê²° ë°©ë²•**:
- RLS ì •ì±… í™•ì¸ (`001_initial_schema.sql` ì‹¤í–‰í–ˆëŠ”ì§€)
- ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
- Supabase ëŒ€ì‹œë³´ë“œ > Authenticationì—ì„œ ì‚¬ìš©ì í™•ì¸

## ì¶”ê°€ ë¦¬ì†ŒìŠ¤

- [Supabase ë¬¸ì„œ](https://supabase.com/docs)
- [Supabase JavaScript í´ë¼ì´ì–¸íŠ¸](https://supabase.com/docs/reference/javascript/introduction)
- [Row Level Security ê°€ì´ë“œ](https://supabase.com/docs/guides/auth/row-level-security)
